var vvv = '';
function crypt() {
	var upr = 'ABCČDEFGHIJKLMNOPRSŠTUVZŽ';
	var ch = upr.split('');

	function randOrd(){
		return (Math.round(Math.random())-0.5); 
	}

	ch.sort(randOrd);
	ch[25] = ch[0];
	var fin = false;
	while (!fin) {
		for (var i = 0; i < 25; i++) {
			if (ch[i] == upr.charAt(i)) {
				var t = ch[i];
				ch[i] = ch[i+1];
				ch[i+1] = t;
			}	
		}
		if (ch[25] == ch[0]) fin = true; else ch[0] = ch[25];
	}
	upr = ch.join(''); 
	return upr.substring(0,25);
}

function stripBlanks(fld) {
	var result = "";
	var c = 0;
	for (i=0; i < fld.length; i++) {if (fld.charAt(i) != " " || c > 0) {
	    result += fld.charAt(i);
	    if (fld.charAt(i) != " ") c = result.length;
	    }
	  }
	return result.substr(0,c);
}

function addQ(thisform) {
	var q = stripBlanks(thisform.q.value);
	if (q == '') {
		return false;
	}
	var t = q.toUpperCase();
	var ary = crypt();
	var s = '';
	t = t.replace(/\r/g,'');
	for (var i = t.length - 1; i >= 0; i--) {
		var a = t.charCodeAt(i); 
		if (a > 64 && a < 91)	s = ary.charAt(a-65)+s;
		else	s = t.charAt(i)+s;
	}
	s=s.replace(/\'/g,'\\\'');
	s=s.replace(/&/g,'&amp;');s=s.replace(/</g,'&lt;');s=s.replace(/>/g,'&gt;');s=s.replace(/&amp;#126;/g,'&#126;');
	s = s.replace(/\n/g,'\\n');
	vvv += 'code[r++] = \''+s+'\';\n';
	thisform.code.value = 'function daily() {var today = new Date();return today.getDate()-1;}\nfunction random() {return Math.floor(Math.random()*code.length);}\nvar code = new Array(); var r = 0;\n'+vvv+'\nvar codenum = 0;\n//codenum = daily();\n//codenum = random();';
	thisform.q.value = '';
}
